<script>import { createEventDispatcher } from 'svelte';
import { isRequired } from '../../utils';
export let field;
// Dispatch.
const dispatch = createEventDispatcher();
let values = [];
const onInput = async (event) => {
    const value = event.currentTarget.value;
    // let value_field = value.
    if (field.extra.items.length > 0) {
        field.extra.items.map((item) => {
            if (item.name === event.currentTarget.name) {
                if (event.currentTarget.checked) {
                    values = [...values, item.value];
                }
                else {
                    values = values.filter((value) => value !== item.value);
                }
            }
        });
        dispatch('changeValue', {
            name: field.name,
            value: values
        });
    }
};
</script>

{#each field.extra.items as item, i}
	<input
		type={field.type}
		class={field.attributes.classes?.join(' ')}
		value={item.value}
		name={item.name}
		checked={item.value ? item.checked : false}
		required={isRequired(field)}
		disabled={field.attributes.disabled}
		on:input={onInput}
	/>
	<span>{item.title}</span>
{/each}
